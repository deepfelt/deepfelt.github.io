var xPos=[],yPos=[],sound,amplitude,lifespan,radius,hue,a=0,button,bg=!0,osc,freq,canvas,redraw,strokeWeight;function setup(){colorMode(HSB,100);canvas=createCanvas(500,500);canvas.parent("canvas-container");background(0);guiSetup()}function draw(){(bg=document.getElementById("redrawOn").checked)&&background(0);radius=radSlider.value();fluctuator(radius);0<xPos.length&&console.log(xPos.length)}
function mouseDragged(){0<mouseX&&mouseX<width&&0<mouseY&&mouseY<height&&(xPos.push(mouseX),yPos.push(mouseY))}
function guiSetup(){radSlider=createSlider(10,500);radSlider.parent("radius");symSlider=createSlider(1,4,4);symSlider.parent("symmetry");xVelSlider=createSlider(-10,10,0);xVelSlider.parent("xvel");yVelSlider=createSlider(-10,10,0);yVelSlider.parent("yvel");aVelSlider=createSlider(-20,20,0);aVelSlider.parent("avel");lengthSlider=createSlider(0,300);lengthSlider.parent("len");shapeSlider=createSlider(0,2,2);shapeSlider.parent("shape");hueSlider=createSlider(0,255);hueSlider.parent("hue");satSlider=
createSlider(0,100,90);satSlider.parent("sat");briSlider=createSlider(0,100,80);briSlider.parent("bri");alphaSlider=createSlider(0,100,100);alphaSlider.parent("alpha");strokeSlider=createSlider(0,100,2);strokeSlider.parent("swt");strokeAlpha=createSlider(0,100,100);strokeAlpha.parent("skalpha")}function mousePressed(){}function mouseReleased(){}
function fluctuator(c,l){var d=shapeSlider.value();hueVal=hueSlider.value();var e=satSlider.value(),f=briSlider.value(),h=symSlider.value(),k=lengthSlider.value(),g=alphaSlider.value();strokeWeight(strokeSlider.value()/10);var b=strokeAlpha.value();stroke(0,b);for(b=0;b<xPos.length;b++){xPos[b]+=xVelSlider.value()/10;yPos[b]+=yVelSlider.value()/10;if(yPos[0]>height+radius||xPos[0]>width+radius||yPos[0]<0-radius||xPos[0]<0-radius||xPos.length>k)yPos.shift(),xPos.shift();rectMode(CENTER);lifespan=255;
--lifespan;push();scale(-1);translate(xPos[b],yPos[b]);rotate(a);fill(noise(yPos[b]/1E3)*hueVal,e,f,g);1<=d&&rect(0,0,noise(yPos[b]/10)*c*sin(millis()/1E3),noise(yPos[b]/10)*c*cos(a/1E3));1>=d&&ellipse(0,0,noise(yPos[b]/10)*c*sin(millis()/1E3),noise(yPos[b]/10)*c*cos(a/1E3));pop();push();translate(xPos[b],yPos[b]);rotate(a);fill(noise(yPos[b]/1E3)*hueVal,e,f,g);1<=d&&rect(0,0,noise(yPos[b]/10)*c*sin(millis()/1E3),noise(yPos[b]/10)*c*cos(a/1E3));1>=d&&ellipse(0,0,noise(yPos[b]/10)*c*sin(millis()/1E3),
noise(yPos[b]/10)*c*cos(a/1E3));pop();1<h&&(push(),fill(noise(yPos[b]/1E3)*hueVal,e,f,g),translate(width-xPos[b],yPos[b]),rotate(-a),1<=d&&rect(0,0,noise(yPos[b]/10)*c*sin(millis()/1E3),noise(yPos[b]/10)*c*cos(a/1E3)),1>=d&&ellipse(0,0,noise(yPos[b]/10)*c*sin(millis()/1E3),noise(yPos[b]/10)*c*cos(a/1E3)),pop());a+=1E-4*aVelSlider.value();2<h&&(fill(noise(yPos[b]/100)*hueVal,e,f,g),push(),translate(yPos[b],xPos[b]),rotate(a),1<=d&&rect(0,0,noise(yPos[b]/10)*c*sin(millis()/1E3),noise(yPos[b]/10)*c*
cos(millis()/1E3)),1>=d&&ellipse(0,0,noise(yPos[b]/10)*c*sin(millis()/1E3),noise(yPos[b]/10)*c*cos(millis()/1E3)),pop(),push(),translate(width-yPos[b],xPos[b]),rotate(-a),1<=d&&rect(0,0,noise(yPos[b]/10)*c*sin(millis()/1E3),noise(yPos[b]/10)*c*cos(millis()/1E3)),1>=d&&ellipse(0,0,noise(yPos[b]/10)*c*sin(millis()/1E3),noise(yPos[b]/10)*c*cos(millis()/1E3)),pop())}};
